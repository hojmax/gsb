(this.webpackJsonpgameshowbuzzer=this.webpackJsonpgameshowbuzzer||[]).push([[0],{41:function(e){e.exports=JSON.parse('{"name":{"minLength":3,"maxLength":15}}')},45:function(e,t,s){},47:function(e,t,s){"use strict";s.r(t);var a=s(3),c=s(1),n=s(16),r=s.n(n),o=s(8),i=s(23),l=(s(37),i.a.initializeApp({apiKey:"AIzaSyBB4VipmvlMioarIOzZ6t5YVjMZtS5weCc",authDomain:"whopresseditfirst.firebaseapp.com",projectId:"whopresseditfirst",storageBucket:"whopresseditfirst.appspot.com",messagingSenderId:"770192381932",databaseURL:"https://whopresseditfirst-default-rtdb.europe-west1.firebasedatabase.app",appId:"1:770192381932:web:e93a8754c60e180a39d2c9"}),i.a.database());var b=function(e){for(var t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],s="",a=0;a<e;a++)s+=t[Math.floor(Math.random()*t.length)];return s},j=s(49),d=s(50),u=s(51),h=s(57),m=s(52),f=s(25),O=s(58);var y=function(e){var t=s(41),n=Object(c.useState)(""),r=Object(o.a)(n,2),i=r[0],y=r[1],x=Object(c.useState)(!1),p=Object(o.a)(x,2),v=p[0],g=p[1],k=Object(c.useState)(b(16)),N=Object(o.a)(k,2),w=N[0],C=(N[1],Object(c.useState)(!1)),S=Object(o.a)(C,2),I=S[0],z=S[1],D=Object(c.useState)(!1),L=Object(o.a)(D,2),E=L[0],W=L[1],_=Object(c.useState)(""),A=Object(o.a)(_,2),B=A[0],F=A[1],P=Object(c.useState)(!1),R=Object(o.a)(P,2),T=R[0],M=R[1],U=Object(c.useState)(!1),J=Object(o.a)(U,2),K=J[0],V=J[1];Object(c.useEffect)((function(){var e=window.location.search.substring(1,9);e?G(e):W(!0)}),[]);var Z=function(t){l.ref("lobbies/_".concat(t)).on("value",(function(s){s.exists()?e.setLobby({server:s.val(),local:{lobbyCode:t,userID:w}}):e.setLobbyExists(!1)}))},G=function(e){I||(z(!0),l.ref("lobbies/_".concat(e)).once("value",(function(t){t.exists()?(y(e),M(!0)):(g(!0),z(!1)),W(!0)})))};return E?T?Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(j.a,{children:[Object(a.jsx)(d.a,{className:"d-flex justify-content-center",children:Object(a.jsxs)(u.a,{style:{maxWidth:"270px"},className:"mt-5",children:[Object(a.jsx)(h.a,{placeholder:"Team Name",onChange:function(e){V(!1),F(e.target.value)},maxLength:t.name.maxLength}),Object(a.jsx)(u.a.Append,{children:Object(a.jsx)(m.a,{variant:"outline-primary",onClick:function(){B.trim().length<t.name.minLength?V(!0):(l.ref("lobbies/_".concat(i,"/players/").concat(w)).set({id:w,name:B,points:0,timePressed:0,pressed:!1}),l.ref("lobbies/_".concat(i,"/players/").concat(w)).onDisconnect().remove(),Z(i))},children:"Enter"})})]})}),Object(a.jsx)(f.a,{in:K,children:Object(a.jsx)(d.a,{className:"d-flex justify-content-center",children:Object(a.jsx)(O.a,{className:"mt-3",variant:"danger",children:"The name is too short. The minimum length is ".concat(t.name.minLength," characters.")})})})]})}):Object(a.jsxs)("center",{children:[Object(a.jsx)("h1",{className:"mt-3",children:"Game Show Buzzer"}),Object(a.jsx)(m.a,{variant:"primary",onClick:function(){if(!I){z(!0);var e=b(8);l.ref("lobbies/_".concat(e)).set({players:[],hostID:w,kickAnnouncer:""}).then((function(){l.ref("lobbies/_".concat(e)).onDisconnect().remove(),Z(e)}))}},className:"mt-4",children:"Create a new lobby"}),v&&Object(a.jsx)(d.a,{className:"d-flex justify-content-center",children:Object(a.jsx)(O.a,{className:"mt-3",variant:"danger",children:"The challenge link is invalid."})})]}):Object(a.jsx)(a.Fragment,{})};var x=function(e){var t=Object(c.useState)(!1),s=Object(o.a)(t,2),n=s[0],r=s[1];return Object(a.jsxs)(u.a,{style:{width:e.url.length-3+"ch"},size:"sm",children:[Object(a.jsx)(h.a,{id:"formURL",value:e.url,onClick:function(){return document.getElementById("formURL").select()},readOnly:!0}),Object(a.jsx)(u.a.Append,{children:Object(a.jsx)(m.a,{onClick:function(t){!function(e){var t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}(e.url),r(!0),document.getElementById("formURL").select()},variant:"outline-primary",children:Object(a.jsx)("i",{className:n?"fas fa-check":"fas fa-link"})})})]})},p=s(53),v=s(54),g=s(56),k=s(55),N=s(24);function w(e){var t=e.lobby.local.userID===e.lobby.server.hostID,s={};Object.values(e.lobby.server.players).filter((function(e){return e.pressed})).sort((function(e,t){return e.timePressed-t.timePressed})).forEach((function(e,t){return s[e.id]=t+1}));var c=Object(N.b)(Object.values(e.lobby.server.players),(function(e){return e.id}),{config:{duration:1e3},from:{opacity:0},enter:{opacity:1},leave:{opacity:0}}),n=function(t){return Object(a.jsx)("td",{class:"text-center",children:Object(a.jsxs)(p.a,{size:"sm",children:[Object(a.jsx)(m.a,{variant:"primary",onClick:function(){e.serverWait||(e.setServerWait(!0),l.ref("lobbies/_".concat(e.lobby.local.lobbyCode,"/players/").concat(t.id,"/points")).set(t.points+1).then((function(){return e.setServerWait(!1)})))},children:Object(a.jsx)("i",{className:"fas fa-plus"})})," ",Object(a.jsx)(m.a,{variant:"primary",onClick:function(){e.serverWait||(e.setServerWait(!0),l.ref("lobbies/_".concat(e.lobby.local.lobbyCode,"/players/").concat(t.id,"/points")).set(t.points-1).then((function(){return e.setServerWait(!1)})))},children:Object(a.jsx)("i",{className:"fas fa-minus"})})," ",Object(a.jsx)(m.a,{variant:"primary",onClick:function(){return s=e.lobby.local.lobbyCode,a=t.id,void l.ref("lobbies/_".concat(s,"/kickAnnouncer")).set(a);var s,a},children:Object(a.jsx)("i",{className:"fas fa-users-slash"})})]})})},r=c.map((function(e,c){var r=e.item,o=e.props,i=e.key;return Object(a.jsxs)(N.a.tr,{style:o,children:[Object(a.jsx)("td",{children:r.pressed&&s[r.id]}),Object(a.jsx)("td",{children:r.name}),Object(a.jsx)("td",{children:r.points}),t&&n(r)]},i)}));return Object(a.jsx)(j.a,{children:Object(a.jsx)(d.a,{style:{maxWidth:"400px"},className:"d-flex justify-content-center",children:Object(a.jsxs)(v.a,{striped:!0,bordered:!0,children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:Object(a.jsx)("i",{className:"text-success fas fa-list-ol"})}),Object(a.jsx)("th",{children:Object(a.jsx)("i",{className:"text-secondary fas fa-users"})}),Object(a.jsx)("th",{children:Object(a.jsx)("i",{className:"text-warning fas fa-star"})}),t&&Object(a.jsx)("th",{children:Object(a.jsx)("i",{className:"fas fa-users-cog"})})]})}),Object(a.jsx)("tbody",{children:r})]})})})}var C=function(e){var t=Object(c.useState)(!1),s=Object(o.a)(t,2),n=s[0],r=s[1],i=e.lobby.local.userID===e.lobby.server.hostID;return Object(c.useEffect)((function(){e.lobby.server.kickAnnouncer===e.lobby.local.userID&&(window.location.search="")}),[e.lobby.server.kickAnnouncer]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(g.a,{activeKey:"",children:Object(a.jsx)(g.a.Item,{children:Object(a.jsx)(g.a.Link,{style:{fontSize:"22px"},href:"/gsb",children:"Home"})})}),Object(a.jsxs)("center",{children:[e.lobby.server.players?Object(a.jsxs)(a.Fragment,{children:[!i&&Object(a.jsx)("button",{className:(e.lobby.server.players[e.lobby.local.userID].pressed?"nonPressable":"pressable")+" buzzer mb-4",onClick:function(){if(!n&&e.lobbyExists&&!e.lobby.server.players[e.lobby.local.userID].pressed){r(!0);var t={};t["lobbies/_".concat(e.lobby.local.lobbyCode,"/players/").concat(e.lobby.local.userID,"/timePressed")]=Date.now(),t["lobbies/_".concat(e.lobby.local.lobbyCode,"/players/").concat(e.lobby.local.userID,"/pressed")]=!0,l.ref().update(t).then((function(){return r(!1)}))}}}),Object(a.jsx)(w,{serverWait:n,setServerWait:r,lobby:e.lobby}),i&&Object(a.jsx)(m.a,{className:"mb-5",variant:"secondary",onClick:function(){if(e.lobby.server.players){var t={};Object.values(e.lobby.server.players).forEach((function(s){t["lobbies/_".concat(e.lobby.local.lobbyCode,"/players/").concat(s.id,"/pressed")]=!1})),l.ref().update(t)}},children:"Reset buzzers"}),Object(a.jsx)(f.a,{in:!e.lobbyExists,children:Object(a.jsx)(d.a,{className:"d-flex justify-content-center",children:Object(a.jsx)(O.a,{className:"mt-3",variant:"danger",children:"The host has left the lobby."})})})]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h2",{children:"Waiting for players."}),Object(a.jsx)(k.a,{className:"mb-5",animation:"border",variant:"primary"})]}),i&&Object(a.jsx)(x,{url:window.location.origin+window.location.pathname+"?"+e.lobby.local.lobbyCode})]})]})};s(45),s(46);var S=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),s=t[0],n=t[1],r=Object(c.useState)(!0),i=Object(o.a)(r,2),l=i[0],b=i[1];return s?Object(a.jsx)(C,{lobbyExists:l,lobby:s}):Object(a.jsx)(y,{setLobbyExists:b,setLobby:n})};r.a.render(Object(a.jsx)(S,{}),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.0c161afd.chunk.js.map