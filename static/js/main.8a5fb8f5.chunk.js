(this.webpackJsonpgameshowbuzzer=this.webpackJsonpgameshowbuzzer||[]).push([[0],{61:function(e){e.exports=JSON.parse('{"name":{"minLength":3,"maxLength":15}}')},66:function(e,t,s){},68:function(e,t,s){"use strict";s.r(t);var a=s(3),c=s(1),r=s(17),n=s.n(r),o=s(9),i=s(42),l=(s(57),i.a.initializeApp({apiKey:"AIzaSyBB4VipmvlMioarIOzZ6t5YVjMZtS5weCc",authDomain:"whopresseditfirst.firebaseapp.com",projectId:"whopresseditfirst",storageBucket:"whopresseditfirst.appspot.com",messagingSenderId:"770192381932",databaseURL:"https://whopresseditfirst-default-rtdb.europe-west1.firebasedatabase.app",appId:"1:770192381932:web:e93a8754c60e180a39d2c9"}),i.a.database());var b=function(e){for(var t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],s="",a=0;a<e;a++)s+=t[Math.floor(Math.random()*t.length)];return s},j=s(73),d=s(74),u=s(75),h=s(82),f=s(47),y=s(44),m=s(83);var O=function(e){var t=s(61),r=Object(c.useState)(""),n=Object(o.a)(r,2),i=n[0],O=n[1],x=Object(c.useState)(!1),p=Object(o.a)(x,2),v=p[0],g=p[1],w=Object(c.useState)(b(16)),N=Object(o.a)(w,2),k=N[0],C=(N[1],Object(c.useState)(!1)),S=Object(o.a)(C,2),I=S[0],z=S[1],D=Object(c.useState)(!1),E=Object(o.a)(D,2),L=E[0],R=E[1],_=Object(c.useState)(""),A=Object(o.a)(_,2),W=A[0],B=A[1],T=Object(c.useState)(!1),F=Object(o.a)(T,2),P=F[0],M=F[1],U=Object(c.useState)(!1),J=Object(o.a)(U,2),K=J[0],V=J[1];Object(c.useEffect)((function(){var e=window.location.search.substring(1,9);e?G(e):R(!0)}),[]);var Z=function(t){l.ref("lobbies/_".concat(t)).on("value",(function(s){s.exists()?e.setLobby({server:s.val(),local:{lobbyCode:t,userID:k}}):e.setLobbyExists(!1)}))},G=function(e){I||(z(!0),l.ref("lobbies/_".concat(e)).once("value",(function(t){t.exists()?(O(e),M(!0),z(!1)):(g(!0),z(!1)),R(!0)})))};return L?P?Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(j.a,{children:[Object(a.jsx)(d.a,{className:"d-flex justify-content-center",children:Object(a.jsxs)(u.a,{style:{maxWidth:"270px"},className:"mt-5",children:[Object(a.jsx)(h.a,{placeholder:"Team Name",onChange:function(e){V(!1),B(e.target.value)},maxLength:t.name.maxLength}),Object(a.jsx)(u.a.Append,{children:Object(a.jsx)(f.a,{variant:"outline-primary",onClick:function(){W.trim().length<t.name.minLength?V(!0):I||(z(!0),l.ref("lobbies/_".concat(i)).once("value",(function(e){e.exists()?(l.ref("lobbies/_".concat(i,"/players/").concat(k)).set({id:k,name:W,points:0,timePressed:0,pressed:!1}),l.ref("lobbies/_".concat(i,"/players/").concat(k)).onDisconnect().remove(),Z(i)):window.location.search=window.location.search})))},children:"Enter"})})]})}),Object(a.jsx)(y.a,{in:K,children:Object(a.jsx)(d.a,{className:"d-flex justify-content-center",children:Object(a.jsx)(m.a,{className:"mt-3",variant:"danger",children:"The name is too short. The minimum length is ".concat(t.name.minLength," characters.")})})})]})}):Object(a.jsxs)("center",{children:[Object(a.jsx)("h1",{className:"mt-3",children:"Game Show Buzzer"}),Object(a.jsx)(f.a,{variant:"primary",onClick:function(){if(!I){z(!0);var e=b(8);l.ref("lobbies/_".concat(e)).set({players:[],hostID:k,kickAnnouncer:""}).then((function(){l.ref("lobbies/_".concat(e)).onDisconnect().remove(),Z(e)}))}},className:"mt-4",children:"Create a new lobby"}),v&&Object(a.jsx)(d.a,{className:"d-flex justify-content-center",children:Object(a.jsx)(m.a,{className:"mt-3",variant:"danger",children:"The challenge link is invalid."})})]}):Object(a.jsx)(a.Fragment,{})},x=s(39);var p=function(e){var t=Object(c.useState)(!1),s=Object(o.a)(t,2),r=s[0],n=s[1];return Object(a.jsxs)(u.a,{style:{width:e.url.length-3+"ch"},size:"sm",children:[Object(a.jsx)(h.a,{id:"formURL",value:e.url,onClick:function(){return document.getElementById("formURL").select()},readOnly:!0}),Object(a.jsx)(u.a.Append,{children:Object(a.jsx)(f.a,{onClick:function(t){!function(e){var t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}(e.url),n(!0),document.getElementById("formURL").select()},variant:"outline-primary",children:Object(a.jsx)("i",{className:r?"fas fa-check":"fas fa-link"})})})]})},v=s(76),g=s(50),w=s(77),N=s(78),k=s(81),C=s(79),S=s(80),I=s(43);function z(e){return Object(a.jsx)(v.a,{id:"dropdown-basic-button",className:"float-right mt-1 mr-1",title:Object(a.jsx)("i",{className:"fas fa-cog"}),children:Object(a.jsxs)(g.a.Item,{onClick:function(){return e.setAutoReset(!e.autoReset)},children:["Reset buzzers when adding points ",e.autoReset?Object(a.jsx)("i",{className:"far fa-toggle-on text-primary"}):Object(a.jsx)("i",{className:"far fa-toggle-off text-primary"})]})})}function D(e){var t=e.lobby.local.userID===e.lobby.server.hostID,s={};Object.values(e.lobby.server.players).filter((function(e){return e.pressed})).sort((function(e,t){return e.timePressed-t.timePressed})).forEach((function(e,t){return s[e.id]=t+1}));var c=Object(I.b)(Object.values(e.lobby.server.players),(function(e){return e.id}),{config:{duration:1e3},from:{opacity:0},enter:{opacity:1},leave:{opacity:0}}),r=function(t){return Object(a.jsx)("td",{className:"text-center",children:Object(a.jsxs)(w.a,{size:"sm",children:[Object(a.jsx)(f.a,{variant:"primary",onClick:function(){if(!e.serverWait&&e.lobby.server.players[t.id]){e.setServerWait(!0);var s={};e.autoReset&&Object.values(e.lobby.server.players).forEach((function(t){s["lobbies/_".concat(e.lobby.local.lobbyCode,"/players/").concat(t.id,"/pressed")]=!1})),s["lobbies/_".concat(e.lobby.local.lobbyCode,"/players/").concat(t.id,"/points")]=t.points+1,l.ref().update(s).then((function(){return e.setServerWait(!1)}))}},children:Object(a.jsx)("i",{className:"fas fa-plus"})})," ",Object(a.jsx)(f.a,{variant:"primary",onClick:function(){!e.serverWait&&e.lobby.server.players[t.id]&&(e.setServerWait(!0),l.ref("lobbies/_".concat(e.lobby.local.lobbyCode,"/players/").concat(t.id,"/points")).set(t.points-1).then((function(){return e.setServerWait(!1)})))},children:Object(a.jsx)("i",{className:"fas fa-minus"})})," ",Object(a.jsx)(f.a,{variant:"primary",onClick:function(){return e.lobby.server.players[t.id]&&(s=e.lobby.local.lobbyCode,a=t.id,void l.ref("lobbies/_".concat(s,"/kickAnnouncer")).set(a));var s,a},children:Object(a.jsx)("i",{className:"fas fa-users-slash"})})]})})},n=Object.values(e.lobby.server.players).reduce((function(e,t){return t.points>e?t.points:e}),-1/0),o=c.map((function(c,o){var i=c.item,l=c.props,b=c.key;return Object(a.jsxs)(I.a.tr,{style:e.lobby.local.userID===i.id?Object(x.a)(Object(x.a)({},l),{},{backgroundColor:"rgb(208, 233, 193)"}):Object(x.a)({},l),children:[Object(a.jsx)("td",{children:i.pressed&&s[i.id]}),Object(a.jsx)("td",{children:i.name}),Object(a.jsx)("td",{children:n===i.points?"".concat(i.points," \ud83e\udd47"):"".concat(i.points," \ud83e\udd48")}),t&&r(i)]},b)}));return Object(a.jsx)(j.a,{children:Object(a.jsx)(d.a,{style:{maxWidth:"400px"},className:"d-flex justify-content-center",children:Object(a.jsxs)(N.a,{striped:!0,bordered:!0,children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:Object(a.jsx)("i",{className:"text-success fas fa-list-ol"})}),Object(a.jsx)("th",{children:Object(a.jsx)("i",{className:"text-secondary fas fa-users"})}),Object(a.jsx)("th",{children:Object(a.jsx)("i",{className:"text-warning fas fa-star"})}),t&&Object(a.jsx)("th",{children:Object(a.jsx)("i",{className:"fas fa-users-cog"})})]})}),Object(a.jsx)("tbody",{children:o})]})})})}var E=function(e){var t=Object(c.useState)(!1),s=Object(o.a)(t,2),r=s[0],n=s[1],i=Object(c.useState)(!1),b=Object(o.a)(i,2),j=b[0],u=b[1],h=e.lobby.local.userID===e.lobby.server.hostID;Object(c.useEffect)((function(){e.lobby.server.kickAnnouncer===e.lobby.local.userID&&(window.location.search="")}),[e.lobby.server.kickAnnouncer]);var O=Object(a.jsx)(k.a,{activeKey:"",style:{display:"inline-block"},children:Object(a.jsx)(k.a.Item,{children:Object(a.jsx)(k.a.Link,{style:{fontSize:"22px"},href:"/gsb",children:"Home"})})});return Object(a.jsxs)(a.Fragment,{children:[h?Object(a.jsxs)(d.a,{children:[Object(a.jsx)(C.a,{children:O}),Object(a.jsx)(C.a,{children:Object(a.jsx)(z,{autoReset:j,setAutoReset:u})})]}):O,Object(a.jsxs)("center",{children:[e.lobby.server.players?Object(a.jsxs)(a.Fragment,{children:[!h&&Object(a.jsx)("button",{className:(e.lobby.server.players[e.lobby.local.userID].pressed?"nonPressable":"pressable")+" buzzer mb-4",onClick:function(){if(!r&&e.lobbyExists&&!e.lobby.server.players[e.lobby.local.userID].pressed){n(!0);var t={};t["lobbies/_".concat(e.lobby.local.lobbyCode,"/players/").concat(e.lobby.local.userID,"/timePressed")]=Date.now(),t["lobbies/_".concat(e.lobby.local.lobbyCode,"/players/").concat(e.lobby.local.userID,"/pressed")]=!0,l.ref().update(t).then((function(){return n(!1)}))}}}),Object(a.jsx)(D,{serverWait:r,autoReset:j,setServerWait:n,lobby:e.lobby}),h&&Object(a.jsx)(f.a,{className:"mb-5",variant:"secondary",onClick:function(){if(e.lobby.server.players){var t={};Object.values(e.lobby.server.players).forEach((function(s){t["lobbies/_".concat(e.lobby.local.lobbyCode,"/players/").concat(s.id,"/pressed")]=!1})),l.ref().update(t)}},children:"Reset buzzers"}),Object(a.jsx)(y.a,{in:!e.lobbyExists,children:Object(a.jsx)(d.a,{className:"d-flex justify-content-center",children:Object(a.jsx)(m.a,{className:"mt-3",variant:"danger",children:h?"The lobby has expired.":"The host has left the lobby."})})})]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h2",{children:"Waiting for players."}),Object(a.jsx)(S.a,{className:"mb-5",animation:"border",variant:"primary"})]}),h&&Object(a.jsx)(p,{url:window.location.origin+window.location.pathname+"?"+e.lobby.local.lobbyCode})]})]})};s(66),s(67);var L=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),s=t[0],r=t[1],n=Object(c.useState)(!0),i=Object(o.a)(n,2),l=i[0],b=i[1];return s?Object(a.jsx)(E,{lobbyExists:l,lobby:s}):Object(a.jsx)(O,{setLobbyExists:b,setLobby:r})};n.a.render(Object(a.jsx)(L,{}),document.getElementById("root"))}},[[68,1,2]]]);
//# sourceMappingURL=main.8a5fb8f5.chunk.js.map