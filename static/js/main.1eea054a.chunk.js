(this.webpackJsonpgameshowbuzzer=this.webpackJsonpgameshowbuzzer||[]).push([[0],{53:function(e){e.exports=JSON.parse('{"name":{"minLength":3,"maxLength":12}}')},59:function(e,t,s){},61:function(e,t,s){"use strict";s.r(t);var a=s(3),c=s(1),r=s(13),n=s.n(r),o=s(9),i=s(35),l=(s(49),i.a.initializeApp({apiKey:"AIzaSyBB4VipmvlMioarIOzZ6t5YVjMZtS5weCc",authDomain:"whopresseditfirst.firebaseapp.com",projectId:"whopresseditfirst",storageBucket:"whopresseditfirst.appspot.com",messagingSenderId:"770192381932",databaseURL:"https://whopresseditfirst-default-rtdb.europe-west1.firebasedatabase.app",appId:"1:770192381932:web:e93a8754c60e180a39d2c9"}),i.a.database());var b=function(e){for(var t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],s="",a=0;a<e;a++)s+=t[Math.floor(Math.random()*t.length)];return s},j=s(66),d=s(67),u=s(68),h=s(73),m=s(39),f=s(37),y=s(74);var p=function(e){var t=s(53),r=Object(c.useState)(""),n=Object(o.a)(r,2),i=n[0],p=n[1],x=Object(c.useState)(!1),O=Object(o.a)(x,2),v=O[0],g=O[1],N=Object(c.useState)(b(16)),w=Object(o.a)(N,2),k=w[0],C=(w[1],Object(c.useState)(!1)),S=Object(o.a)(C,2),I=S[0],z=S[1],D=Object(c.useState)(!1),L=Object(o.a)(D,2),R=L[0],E=L[1],_=Object(c.useState)(""),A=Object(o.a)(_,2),W=A[0],T=A[1],B=Object(c.useState)(!1),F=Object(o.a)(B,2),U=F[0],M=F[1],P=Object(c.useState)(!1),J=Object(o.a)(P,2),V=J[0],Z=J[1];Object(c.useEffect)((function(){var e=window.location.search.substring(1,9);e?K(e):E(!0)}),[]);var G=function(t){l.ref("lobbies/_".concat(t)).on("value",(function(s){s.exists()?e.setLobby({server:s.val(),local:{lobbyCode:t,userID:k}}):e.setLobbyExists(!1)}))},K=function(e){I||(z(!0),l.ref("lobbies/_".concat(e)).once("value",(function(t){t.exists()?(p(e),M(!0),z(!1)):(g(!0),z(!1)),E(!0)})))};return R?U?Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(j.a,{children:[Object(a.jsx)(d.a,{className:"d-flex justify-content-center",children:Object(a.jsxs)(u.a,{style:{maxWidth:"270px"},className:"mt-5",children:[Object(a.jsx)(h.a,{placeholder:"Team Name",onChange:function(e){Z(!1),T(e.target.value)},maxLength:t.name.maxLength}),Object(a.jsx)(u.a.Append,{children:Object(a.jsx)(m.a,{variant:"outline-primary",onClick:function(){W.trim().length<t.name.minLength?Z(!0):I||(z(!0),l.ref("lobbies/_".concat(i)).once("value",(function(e){e.exists()?(l.ref("lobbies/_".concat(i,"/players/").concat(k)).set({id:k,name:W,points:0,timePressed:0,pressed:!1}),l.ref("lobbies/_".concat(i,"/players/").concat(k)).onDisconnect().remove(),G(i)):window.location.search=window.location.search})))},children:"Enter"})})]})}),Object(a.jsx)(f.a,{in:V,children:Object(a.jsx)(d.a,{className:"d-flex justify-content-center",children:Object(a.jsx)(y.a,{className:"mt-3",variant:"danger",children:"The name is too short. The minimum length is ".concat(t.name.minLength," characters.")})})})]})}):Object(a.jsxs)("center",{children:[Object(a.jsx)("h1",{className:"mt-3",children:"Game Show Buzzer"}),Object(a.jsx)(m.a,{variant:"primary",onClick:function(){if(!I){z(!0);var e=b(8);l.ref("lobbies/_".concat(e)).set({players:[],hostID:k,kickAnnouncer:""}).then((function(){l.ref("lobbies/_".concat(e)).onDisconnect().remove(),G(e)}))}},className:"mt-4",children:"Create a new lobby"}),v&&Object(a.jsx)(d.a,{className:"d-flex justify-content-center",children:Object(a.jsx)(y.a,{className:"mt-3",variant:"danger",children:"The challenge link is invalid."})})]}):Object(a.jsx)(a.Fragment,{})};var x=function(e){var t=Object(c.useState)(!1),s=Object(o.a)(t,2),r=s[0],n=s[1];return Object(a.jsxs)(u.a,{style:{width:e.url.length-3+"ch"},size:"sm",children:[Object(a.jsx)(h.a,{id:"formURL",value:e.url,onClick:function(){return document.getElementById("formURL").select()},readOnly:!0}),Object(a.jsx)(u.a.Append,{children:Object(a.jsx)(m.a,{onClick:function(t){!function(e){var t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}(e.url),n(!0),document.getElementById("formURL").select()},variant:"outline-primary",children:Object(a.jsx)("i",{className:r?"fas fa-check":"fas fa-link"})})})]})},O=s(69),v=s(42),g=s(70),N=s(71),w=s(72),k=s(36);function C(e){return Object(a.jsxs)(O.a,{style:{margin:0,position:"absolute",top:"0px",right:"7px"},id:"dropdown-basic-button",className:"float-right mt-2",title:Object(a.jsx)("i",{className:"fas fa-cog"}),children:[Object(a.jsxs)(v.a.Item,{onClick:function(){return e.setAutoReset(!e.autoReset)},children:["Reset buzzers when adding points ",e.autoReset?Object(a.jsx)("i",{className:"far fa-toggle-on text-primary"}):Object(a.jsx)("i",{className:"far fa-toggle-off text-primary"})]}),e.showURL&&Object(a.jsx)(v.a.Item,{children:Object(a.jsx)(x,{url:e.url})})]})}function S(e){var t=e.lobby.local.userID===e.lobby.server.hostID,s={};Object.values(e.lobby.server.players).filter((function(e){return e.pressed})).sort((function(e,t){return e.timePressed-t.timePressed})).forEach((function(e,t){return s[e.id]=t+1}));var c=Object(k.b)(Object.values(e.lobby.server.players),(function(e){return e.id}),{config:{duration:1e3},from:{opacity:0},enter:{opacity:1},leave:{opacity:0}}),r=function(t){return Object(a.jsx)("td",{className:"text-center",children:Object(a.jsxs)(g.a,{size:"sm",children:[Object(a.jsx)(m.a,{variant:"primary",onClick:function(){if(!e.serverWait&&e.lobby.server.players[t.id]){e.setServerWait(!0);var s={};e.autoReset&&Object.values(e.lobby.server.players).forEach((function(t){s["lobbies/_".concat(e.lobby.local.lobbyCode,"/players/").concat(t.id,"/pressed")]=!1})),s["lobbies/_".concat(e.lobby.local.lobbyCode,"/players/").concat(t.id,"/points")]=t.points+1,l.ref().update(s).then((function(){return e.setServerWait(!1)}))}},children:Object(a.jsx)("i",{className:"fas fa-plus"})})," ",Object(a.jsx)(m.a,{variant:"primary",onClick:function(){!e.serverWait&&e.lobby.server.players[t.id]&&(e.setServerWait(!0),l.ref("lobbies/_".concat(e.lobby.local.lobbyCode,"/players/").concat(t.id,"/points")).set(t.points-1).then((function(){return e.setServerWait(!1)})))},children:Object(a.jsx)("i",{className:"fas fa-minus"})})," ",Object(a.jsx)(m.a,{variant:"primary",onClick:function(){return e.lobby.server.players[t.id]&&(s=e.lobby.local.lobbyCode,a=t.id,void l.ref("lobbies/_".concat(s,"/kickAnnouncer")).set(a));var s,a},children:Object(a.jsx)("i",{className:"fas fa-users-slash"})})]})})},n=!1,o=Object.values(e.lobby.server.players).reduce((function(e,t){return t.points>e?(n=!1,t.points):t.points==e?(n=!0,e):e}),-1/0),i=c.map((function(c,i){var l,b=c.item,j=c.props,d=c.key;return Object(a.jsxs)(k.a.tr,{style:j,className:e.lobby.local.userID===b.id?"table-active":"",children:[Object(a.jsx)("td",{children:b.pressed&&s[b.id]}),Object(a.jsx)("td",{children:b.name}),Object(a.jsx)("td",{style:{fontFamily:"Roboto Mono"},children:(l=b.points,l==o?"".concat(l,n?"\ud83e\udd3c\u200d\u2642\ufe0f":"\ud83e\udd47"):l)}),t&&r(b)]},d)}));return Object(a.jsx)(d.a,{style:{maxWidth:"500px",marginTop:t?"60px":"20px"},className:"justify-content-center ",children:Object(a.jsxs)(N.a,{bordered:!0,children:[Object(a.jsx)("thead",{className:"thead-dark",children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:Object(a.jsx)("i",{className:"text-success fas fa-list-ol"})}),Object(a.jsx)("th",{children:Object(a.jsx)("i",{className:"text-primary fas fa-users"})}),Object(a.jsx)("th",{children:Object(a.jsx)("i",{className:"text-warning fas fa-star"})}),t&&Object(a.jsx)("th",{children:Object(a.jsx)("i",{className:"fas fa-users-cog"})})]})}),Object(a.jsx)("tbody",{children:i})]})})}var I=function(e){var t=Object(c.useState)(!1),s=Object(o.a)(t,2),r=s[0],n=s[1],i=Object(c.useState)(!1),b=Object(o.a)(i,2),u=b[0],h=b[1],p=e.lobby.local.userID===e.lobby.server.hostID;Object(c.useEffect)((function(){e.lobby.server.kickAnnouncer===e.lobby.local.userID&&(window.location.search="")}),[e.lobby.server.kickAnnouncer]);var O=Object(a.jsx)(m.a,{style:{margin:0,position:"absolute",top:"0px",left:"7px"},variant:"primary",href:"/gsb",className:"mt-2",children:Object(a.jsx)("i",{className:"fas fa-home"})}),v=window.location.origin+window.location.pathname+"?"+e.lobby.local.lobbyCode;return Object(a.jsxs)(a.Fragment,{children:[p?Object(a.jsxs)(a.Fragment,{children:[O,Object(a.jsx)(C,{showURL:e.lobby.server.players,autoReset:u,url:v,setAutoReset:h})]}):O,Object(a.jsx)(j.a,{children:Object(a.jsxs)("center",{children:[e.lobby.server.players?Object(a.jsxs)(a.Fragment,{children:[!p&&Object(a.jsx)("button",{className:(e.lobby.server.players[e.lobby.local.userID].pressed?"nonPressable":"pressable")+" buzzer",onClick:function(){if(!r&&e.lobbyExists&&!e.lobby.server.players[e.lobby.local.userID].pressed){n(!0);var t={};t["lobbies/_".concat(e.lobby.local.lobbyCode,"/players/").concat(e.lobby.local.userID,"/timePressed")]=Date.now(),t["lobbies/_".concat(e.lobby.local.lobbyCode,"/players/").concat(e.lobby.local.userID,"/pressed")]=!0,l.ref().update(t).then((function(){return n(!1)}))}},style:{marginTop:"20px"}}),Object(a.jsx)(S,{serverWait:r,autoReset:u,setServerWait:n,lobby:e.lobby}),p&&Object(a.jsx)(m.a,{variant:"dark",onClick:function(){if(e.lobby.server.players){var t={};Object.values(e.lobby.server.players).forEach((function(s){t["lobbies/_".concat(e.lobby.local.lobbyCode,"/players/").concat(s.id,"/pressed")]=!1})),l.ref().update(t)}},children:"Reset buzzers"}),Object(a.jsx)(f.a,{in:!e.lobbyExists,children:Object(a.jsx)(d.a,{className:"d-flex justify-content-center",children:Object(a.jsx)(y.a,{className:"mt-3",variant:"danger",children:p?"The lobby has expired.":"The host has left the lobby."})})})]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h2",{style:{marginTop:"55px"},children:"Waiting for players."}),Object(a.jsx)(w.a,{className:"mb-5",animation:"border",variant:"primary"})]}),!e.lobby.server.players&&Object(a.jsx)(x,{url:v})]})})]})};s(59),s(60);var z=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),s=t[0],r=t[1],n=Object(c.useState)(!0),i=Object(o.a)(n,2),l=i[0],b=i[1];return s?Object(a.jsx)(I,{lobbyExists:l,lobby:s}):Object(a.jsx)(p,{setLobbyExists:b,setLobby:r})};n.a.render(Object(a.jsx)(z,{}),document.getElementById("root"))}},[[61,1,2]]]);
//# sourceMappingURL=main.1eea054a.chunk.js.map