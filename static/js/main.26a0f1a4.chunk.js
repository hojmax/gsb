(this.webpackJsonpgameshowbuzzer=this.webpackJsonpgameshowbuzzer||[]).push([[0],{40:function(e){e.exports=JSON.parse('{"name":{"minLength":3,"maxLength":15}}')},44:function(e,t,s){},46:function(e,t,s){"use strict";s.r(t);var c=s(3),a=s(1),n=s(16),r=s.n(n),o=s(8),i=s(23),l=(s(36),i.a.initializeApp({apiKey:"AIzaSyBB4VipmvlMioarIOzZ6t5YVjMZtS5weCc",authDomain:"whopresseditfirst.firebaseapp.com",projectId:"whopresseditfirst",storageBucket:"whopresseditfirst.appspot.com",messagingSenderId:"770192381932",databaseURL:"https://whopresseditfirst-default-rtdb.europe-west1.firebasedatabase.app",appId:"1:770192381932:web:e93a8754c60e180a39d2c9"}),i.a.database());var b=function(e){for(var t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],s="",c=0;c<e;c++)s+=t[Math.floor(Math.random()*t.length)];return s},j=s(48),d=s(49),u=s(50),h=s(56),f=s(51),m=s(54);var O=function(e){var t=s(40),n=Object(a.useState)(""),r=Object(o.a)(n,2),i=r[0],O=r[1],y=Object(a.useState)(""),x=Object(o.a)(y,2),p=x[0],v=x[1],g=Object(a.useState)(b(16)),k=Object(o.a)(g,2),w=k[0],C=(k[1],Object(a.useState)(!1)),S=Object(o.a)(C,2),I=S[0],N=S[1],D=Object(a.useState)(!1),L=Object(o.a)(D,2),E=L[0],z=L[1],W=Object(a.useState)(""),_=Object(o.a)(W,2),A=_[0],B=_[1],F=Object(a.useState)(!1),P=Object(o.a)(F,2),R=P[0],T=P[1],M=Object(a.useState)(""),U=Object(o.a)(M,2),J=U[0],K=U[1];Object(a.useEffect)((function(){var e=window.location.search.substring(1,9);e?Z(e):z(!0)}),[]);var V=function(t){l.ref("lobbies/_".concat(t)).on("value",(function(s){s.exists()?e.setLobby({server:s.val(),local:{lobbyCode:t,userID:w}}):e.setLobbyExists(!1)}))},Z=function(e){I||(N(!0),l.ref("lobbies/_".concat(e)).once("value",(function(t){t.exists()?(O(e),T(!0)):(v("The challenge link is invalid."),N(!1)),z(!0)})))};return E?R?Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)(j.a,{children:[Object(c.jsx)(d.a,{className:"d-flex justify-content-center",children:Object(c.jsxs)(u.a,{style:{maxWidth:"270px"},className:"mt-5",children:[Object(c.jsx)(h.a,{placeholder:"Team Name",onChange:function(e){K(""),B(e.target.value)},maxLength:t.name.maxLength}),Object(c.jsx)(u.a.Append,{children:Object(c.jsx)(f.a,{variant:"outline-primary",onClick:function(){A.trim().length<t.name.minLength?K("The name is too short. The minimum length is ".concat(t.name.minLength," characters.")):(l.ref("lobbies/_".concat(i,"/players/").concat(w)).set({id:w,name:A,points:0,timePressed:0,pressed:!1}),l.ref("lobbies/_".concat(i,"/players/").concat(w)).onDisconnect().remove(),V(i))},children:"Enter"})})]})}),J&&Object(c.jsx)(d.a,{className:"d-flex justify-content-center",children:Object(c.jsx)(m.a,{className:"mt-3",variant:"danger",children:J})})]})}):Object(c.jsxs)("center",{children:[Object(c.jsx)("h1",{className:"mt-3",children:"Game Show Buzzer"}),Object(c.jsx)(f.a,{variant:"primary",onClick:function(){if(!I){N(!0);var e=b(8);l.ref("lobbies/_".concat(e)).set({players:[],hostID:w,kickAnnouncer:""}).then((function(){l.ref("lobbies/_".concat(e)).onDisconnect().remove(),V(e)}))}},className:"mt-3",children:"Create a new lobby"}),p&&Object(c.jsx)(d.a,{className:"d-flex justify-content-center",children:Object(c.jsx)(m.a,{className:"mt-3",variant:"danger",children:p})})]}):Object(c.jsx)(c.Fragment,{})};var y=function(e){var t=Object(a.useState)(!1),s=Object(o.a)(t,2),n=s[0],r=s[1];return Object(c.jsxs)(u.a,{style:{width:e.url.length-3+"ch"},size:"sm",children:[Object(c.jsx)(h.a,{id:"formURL",value:e.url,onClick:function(){return document.getElementById("formURL").select()},readOnly:!0}),Object(c.jsx)(u.a.Append,{children:Object(c.jsx)(f.a,{onClick:function(t){!function(e){var t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}(e.url),r(!0),document.getElementById("formURL").select()},variant:"outline-primary",children:Object(c.jsx)("i",{className:n?"fas fa-check":"fas fa-link"})})})]})},x=s(52),p=s(55),v=s(53),g=s(24);function k(e){var t=e.lobby.local.userID===e.lobby.server.hostID,s={};Object.values(e.lobby.server.players).filter((function(e){return e.pressed})).sort((function(e,t){return e.timePressed-t.timePressed})).forEach((function(e,t){return s[e.id]=t+1}));var a=Object(g.b)(Object.values(e.lobby.server.players),(function(e){return e.id}),{config:{duration:1e3},from:{opacity:0},enter:{opacity:1},leave:{opacity:0}}),n=function(t){return Object(c.jsxs)("td",{children:[Object(c.jsx)(f.a,{variant:"primary",onClick:function(){e.serverWait||(e.setServerWait(!0),l.ref("lobbies/_".concat(e.lobby.local.lobbyCode,"/players/").concat(t.id,"/points")).set(t.points+1).then((function(){return e.setServerWait(!1)})))},children:Object(c.jsx)("i",{className:"fas fa-plus"})})," ",Object(c.jsx)(f.a,{variant:"primary",onClick:function(){e.serverWait||(e.setServerWait(!0),l.ref("lobbies/_".concat(e.lobby.local.lobbyCode,"/players/").concat(t.id,"/points")).set(t.points-1).then((function(){return e.setServerWait(!1)})))},children:Object(c.jsx)("i",{className:"fas fa-minus"})})," ",Object(c.jsx)(f.a,{variant:"primary",onClick:function(){return s=e.lobby.local.lobbyCode,c=t.id,void l.ref("lobbies/_".concat(s,"/kickAnnouncer")).set(c);var s,c},children:Object(c.jsx)("i",{class:"fas fa-users-slash"})})]})},r=a.map((function(e,a){var r=e.item,o=e.props,i=e.key;return Object(c.jsxs)(g.a.tr,{style:o,children:[Object(c.jsx)("td",{children:r.pressed&&s[r.id]}),Object(c.jsx)("td",{children:r.name}),Object(c.jsx)("td",{children:r.points}),t&&n(r)]},i)}));return Object(c.jsx)(j.a,{children:Object(c.jsx)(d.a,{style:{maxWidth:"400px"},className:"d-flex justify-content-center",children:Object(c.jsxs)(x.a,{striped:!0,bordered:!0,children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:Object(c.jsx)("i",{className:"text-success fas fa-list-ol"})}),Object(c.jsx)("th",{children:Object(c.jsx)("i",{className:"text-secondary fas fa-users"})}),Object(c.jsx)("th",{children:Object(c.jsx)("i",{className:"text-warning fas fa-star"})}),t&&Object(c.jsx)("th",{children:Object(c.jsx)("i",{class:"fas fa-users-cog"})})]})}),Object(c.jsx)("tbody",{children:r})]})})})}var w=function(e){var t=Object(a.useState)(!1),s=Object(o.a)(t,2),n=s[0],r=s[1],i=e.lobby.local.userID===e.lobby.server.hostID;return Object(a.useEffect)((function(){e.lobby.server.kickAnnouncer===e.lobby.local.userID&&(window.location.search="")}),[e.lobby.server.kickAnnouncer]),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(p.a,{activeKey:"",children:Object(c.jsx)(p.a.Item,{children:Object(c.jsx)(p.a.Link,{href:"/",children:"Home"})})}),Object(c.jsxs)("center",{children:[e.lobby.server.players?Object(c.jsxs)(c.Fragment,{children:[!i&&Object(c.jsx)("button",{className:(e.lobby.server.players[e.lobby.local.userID].pressed?"nonPressable":"pressable")+" buzzer mb-4",onClick:function(){if(!n&&e.lobbyExists&&!e.lobby.server.players[e.lobby.local.userID].pressed){r(!0);var t={};t["lobbies/_".concat(e.lobby.local.lobbyCode,"/players/").concat(e.lobby.local.userID,"/timePressed")]=Date.now(),t["lobbies/_".concat(e.lobby.local.lobbyCode,"/players/").concat(e.lobby.local.userID,"/pressed")]=!0,l.ref().update(t).then((function(){return r(!1)}))}}}),Object(c.jsx)(k,{serverWait:n,setServerWait:r,lobby:e.lobby}),i&&Object(c.jsx)(f.a,{variant:"secondary",onClick:function(){if(e.lobby.server.players){var t={};Object.values(e.lobby.server.players).forEach((function(s){t["lobbies/_".concat(e.lobby.local.lobbyCode,"/players/").concat(s.id,"/pressed")]=!1})),l.ref().update(t)}},children:"Reset buzzers"}),!e.lobbyExists&&Object(c.jsx)(d.a,{className:"d-flex justify-content-center",children:Object(c.jsx)(m.a,{className:"mt-3",variant:"danger",children:"The host has left the lobby."})})]}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("h3",{children:"Waiting for players."}),Object(c.jsx)(v.a,{animation:"border",variant:"primary"})]}),i&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("br",{})," ",Object(c.jsx)("br",{}),Object(c.jsx)(y,{url:window.location.origin+window.location.pathname+"?"+e.lobby.local.lobbyCode})]})]})]})};s(44),s(45);var C=function(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),s=t[0],n=t[1],r=Object(a.useState)(!0),i=Object(o.a)(r,2),l=i[0],b=i[1];return s?Object(c.jsx)(w,{lobbyExists:l,lobby:s}):Object(c.jsx)(O,{setLobbyExists:b,setLobby:n})};r.a.render(Object(c.jsx)(C,{}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.26a0f1a4.chunk.js.map