(this.webpackJsonpgameshowbuzzer=this.webpackJsonpgameshowbuzzer||[]).push([[0],{55:function(e){e.exports=JSON.parse('{"name":{"minLength":3,"maxLength":12}}')},61:function(e,t,s){},63:function(e,t,s){"use strict";s.r(t);var a=s(3),r=s(1),c=s(13),n=s.n(c),o=s(9),i=s(38),l=(s(51),i.a.initializeApp({apiKey:"AIzaSyBB4VipmvlMioarIOzZ6t5YVjMZtS5weCc",authDomain:"whopresseditfirst.firebaseapp.com",projectId:"whopresseditfirst",storageBucket:"whopresseditfirst.appspot.com",messagingSenderId:"770192381932",databaseURL:"https://whopresseditfirst-default-rtdb.europe-west1.firebasedatabase.app",appId:"1:770192381932:web:e93a8754c60e180a39d2c9"}),i.a.database());var b=function(e){for(var t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],s="",a=0;a<e;a++)s+=t[Math.floor(Math.random()*t.length)];return s},j=s(68),d=s(69),u=s(70),y=s(75),f=s(41),p=s(40),m=s(76);var x=function(e){var t=s(55),c=Object(r.useState)(""),n=Object(o.a)(c,2),i=n[0],x=n[1],h=Object(r.useState)(!1),O=Object(o.a)(h,2),v=O[0],g=O[1],w=Object(r.useState)(b(16)),N=Object(o.a)(w,2),k=N[0],C=(N[1],Object(r.useState)(!1)),E=Object(o.a)(C,2),S=E[0],I=E[1],z=Object(r.useState)(!1),L=Object(o.a)(z,2),R=L[0],_=L[1],D=Object(r.useState)(""),A=Object(o.a)(D,2),W=A[0],T=A[1],B=Object(r.useState)(!1),F=Object(o.a)(B,2),P=F[0],U=F[1],M=Object(r.useState)(!1),J=Object(o.a)(M,2),V=J[0],Z=J[1];Object(r.useEffect)((function(){var e=window.location.search.substring(1,9);e?K(e):_(!0)}),[]);var G=function(t){l.ref("lobbies/_".concat(t)).on("value",(function(s){s.exists()?e.setLobby({server:s.val(),local:{lobbyCode:t,userID:k}}):e.setLobbyExists(!1)}))},K=function(e){S||(I(!0),l.ref("lobbies/_".concat(e)).once("value",(function(t){t.exists()?(x(e),U(!0),I(!1)):(g(!0),I(!1)),_(!0)})))};return R?P?Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(j.a,{children:[Object(a.jsx)(d.a,{className:"d-flex justify-content-center",children:Object(a.jsxs)(u.a,{style:{maxWidth:"270px"},className:"mt-5",children:[Object(a.jsx)(y.a,{placeholder:"Team Name",onChange:function(e){Z(!1),T(e.target.value)},maxLength:t.name.maxLength}),Object(a.jsx)(u.a.Append,{children:Object(a.jsx)(f.a,{variant:"outline-primary",onClick:function(){W.trim().length<t.name.minLength?Z(!0):S||(I(!0),l.ref("lobbies/_".concat(i)).once("value",(function(e){e.exists()?(l.ref("lobbies/_".concat(i,"/players/").concat(k)).set({id:k,name:W,points:0,timePressed:0,pressed:!1}),window.onbeforeunload=function(){l.ref("lobbies/_".concat(i,"/players/").concat(k)).remove()},G(i)):window.location.search=window.location.search})))},children:"Enter"})})]})}),Object(a.jsx)(p.a,{in:V,children:Object(a.jsx)(d.a,{className:"d-flex justify-content-center",children:Object(a.jsx)(m.a,{className:"mt-3",variant:"danger",children:"The name is too short. The minimum length is ".concat(t.name.minLength," characters.")})})})]})}):Object(a.jsxs)("center",{children:[Object(a.jsx)("h1",{className:"mt-3",children:"Game Show Buzzer"}),Object(a.jsx)(f.a,{variant:"primary",onClick:function(){if(!S){I(!0);var e=b(8);l.ref("lobbies/_".concat(e)).set({players:[],hostID:k,kickAnnouncer:""}).then((function(){window.onbeforeunload=function(){l.ref("lobbies/_".concat(e)).remove()},G(e)}))}},className:"mt-4",children:"Create a new lobby"}),v&&Object(a.jsx)(d.a,{className:"d-flex justify-content-center",children:Object(a.jsx)(m.a,{className:"mt-3",variant:"danger",children:"The challenge link is invalid."})})]}):Object(a.jsx)(a.Fragment,{})};var h=function(e){var t=Object(r.useState)(!1),s=Object(o.a)(t,2),c=s[0],n=s[1];return Object(a.jsxs)(u.a,{style:{width:e.url.length-3+"ch"},size:"sm",children:[Object(a.jsx)(y.a,{id:"formURL",value:e.url,onClick:function(){return document.getElementById("formURL").select()},readOnly:!0}),Object(a.jsx)(u.a.Append,{children:Object(a.jsx)(f.a,{onClick:function(t){!function(e){var t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}(e.url),n(!0),document.getElementById("formURL").select()},variant:"outline-primary",children:Object(a.jsx)("i",{className:c?"fas fa-check":"fas fa-link"})})})]})},O=s(73),v=s(44),g=s(74),w=s(39),N=s(71),k=s(72),C=s(26);var E=function(e){var t=e.lobby.local.userID===e.lobby.server.hostID,s={};Object.values(e.lobby.server.players).filter((function(e){return e.pressed})).sort((function(e,t){return e.timePressed-t.timePressed})).forEach((function(e,t){return s[e.id]=t+1}));var r=Object(C.b)(Object.values(e.lobby.server.players),(function(e){return e.id}),{config:{duration:1e3},from:{opacity:0},enter:{opacity:1},leave:{opacity:0}}),c=Object(C.b)(Object.values(e.lobby.server.players).filter((function(e){return e.pressed})).sort((function(e,t){return e.timePressed-t.timePressed})).map((function(e,t){return Object(w.a)(Object(w.a)({},e),{},{position:t+1})})),(function(e){return e.id}),{config:{duration:200},from:{x:0,opacity:0},enter:{x:1,opacity:1},leave:{x:1,opacity:0}}),n=function(e){var t=c.map((function(e){return e.item.id})).indexOf(e.id);if(-1!=t){var s=c[t];return Object(a.jsx)(C.a.p,{style:{fontSize:s.props.x.interpolate({range:[0,.5,1],output:[5,20,16]}).interpolate((function(e){return"".concat(e,"px")})),margin:0,opacity:s.props.opacity},children:s.item.position},s.key)}return null},o=function(t){return Object(a.jsx)("td",{className:"text-center",children:Object(a.jsxs)(N.a,{size:"sm",children:[Object(a.jsx)(f.a,{variant:"primary",disabled:!e.lobbyExists,onClick:function(){if(!e.serverWait&&e.lobby.server.players[t.id]){e.setServerWait(!0);var s={};e.autoReset&&Object.values(e.lobby.server.players).forEach((function(t){s["lobbies/_".concat(e.lobby.local.lobbyCode,"/players/").concat(t.id,"/pressed")]=!1})),s["lobbies/_".concat(e.lobby.local.lobbyCode,"/players/").concat(t.id,"/points")]=t.points+1,l.ref().update(s).then((function(){l.ref("lobbies/_".concat(e.lobby.local.lobbyCode,"/players/").concat(t.id)).once("value").then((function(s){void 0===s.val().id&&l.ref("lobbies/_".concat(e.lobby.local.lobbyCode,"/players/").concat(t.id)).remove()})),e.setServerWait(!1)}))}},children:Object(a.jsx)("i",{className:"fas fa-plus"})})," ",Object(a.jsx)(f.a,{variant:"primary",disabled:!e.lobbyExists,onClick:function(){!e.serverWait&&e.lobby.server.players[t.id]&&(e.setServerWait(!0),l.ref("lobbies/_".concat(e.lobby.local.lobbyCode,"/players/").concat(t.id,"/points")).set(t.points-1).then((function(){return e.setServerWait(!1)})))},children:Object(a.jsx)("i",{className:"fas fa-minus"})})," ",Object(a.jsx)(f.a,{variant:"primary",disabled:!e.lobbyExists,onClick:function(){return e.lobby.server.players[t.id]&&(s=e.lobby.local.lobbyCode,a=t.id,void l.ref("lobbies/_".concat(s,"/kickAnnouncer")).set(a));var s,a},children:Object(a.jsx)("i",{className:"fas fa-users-slash"})})]})})},i=!1,b=Object.values(e.lobby.server.players).reduce((function(e,t){return t.points>e?(i=!1,t.points):t.points===e?(i=!0,e):e}),-1/0),j=r.map((function(s,r){var c,l=s.item,j=s.props,d=s.key;return l.id?Object(a.jsxs)(C.a.tr,{style:j,className:e.lobby.local.userID===l.id?"table-active":"",children:[Object(a.jsx)("td",{children:n(l)}),Object(a.jsx)("td",{children:l.name}),Object(a.jsx)("td",{style:{fontFamily:"Roboto Mono"},children:(c=l.points,c===b?"".concat(c,i?"\ud83e\udd3c\u200d\u2642\ufe0f":"\ud83e\udd47"):c)}),t&&o(l)]},d):void 0}));return Object(a.jsx)(d.a,{style:{maxWidth:"500px",marginTop:t?"60px":"20px"},className:"justify-content-center ",children:Object(a.jsxs)(k.a,{bordered:!0,children:[Object(a.jsx)("thead",{className:"thead-dark",children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:Object(a.jsx)("i",{className:"text-success fas fa-list-ol"})}),Object(a.jsx)("th",{children:Object(a.jsx)("i",{className:"text-primary fas fa-users"})}),Object(a.jsx)("th",{children:Object(a.jsx)("i",{className:"text-warning fas fa-star"})}),t&&Object(a.jsx)("th",{children:Object(a.jsx)("i",{className:"fas fa-users-cog"})})]})}),Object(a.jsx)("tbody",{children:j})]})})};function S(e){return Object(a.jsxs)(O.a,{disabled:!e.lobbyExists,style:{margin:0,position:"absolute",top:"0px",right:"7px"},id:"dropdown-basic-button",className:"float-right mt-2",title:Object(a.jsx)("i",{className:"fas fa-cog"}),children:[Object(a.jsxs)(v.a.Item,{onClick:function(){return e.setAutoReset(!e.autoReset)},children:["Reset buzzers when adding points ",e.autoReset?Object(a.jsx)("i",{className:"far fa-toggle-on text-primary"}):Object(a.jsx)("i",{className:"far fa-toggle-off text-primary"})]}),e.showURL&&Object(a.jsx)(v.a.Item,{children:Object(a.jsx)(h,{url:e.url})})]})}var I=function(e){var t=Object(r.useState)(!1),s=Object(o.a)(t,2),c=s[0],n=s[1],i=Object(r.useState)(!1),b=Object(o.a)(i,2),u=b[0],y=b[1],x=e.lobby.local.userID===e.lobby.server.hostID;Object(r.useEffect)((function(){e.lobby.server.kickAnnouncer===e.lobby.local.userID&&(window.location.search="")}),[e.lobby.server.kickAnnouncer]);var O=Object(a.jsx)(f.a,{style:{margin:0,position:"absolute",top:"0px",left:"7px"},variant:"primary",href:"/gsb",className:"mt-2",children:Object(a.jsx)("i",{className:"fas fa-home"})}),v=window.location.origin+window.location.pathname+"?"+e.lobby.local.lobbyCode;return Object(a.jsxs)(a.Fragment,{children:[x?Object(a.jsxs)(a.Fragment,{children:[O,Object(a.jsx)(S,{lobbyExists:e.lobbyExists,showURL:e.lobby.server.players,autoReset:u,url:v,setAutoReset:y})]}):O,Object(a.jsx)(j.a,{children:Object(a.jsxs)("center",{children:[e.lobby.server.players?Object(a.jsxs)(a.Fragment,{children:[!x&&Object(a.jsx)("button",{className:(e.lobby.server.players[e.lobby.local.userID].pressed?"nonPressable":"pressable")+" buzzer",onClick:function(){return e.lobbyExists&&function(){if(!c&&e.lobbyExists&&!e.lobby.server.players[e.lobby.local.userID].pressed){n(!0);var t={};t["lobbies/_".concat(e.lobby.local.lobbyCode,"/players/").concat(e.lobby.local.userID,"/timePressed")]=Date.now(),t["lobbies/_".concat(e.lobby.local.lobbyCode,"/players/").concat(e.lobby.local.userID,"/pressed")]=!0,l.ref().update(t).then((function(){return n(!1)}))}}()},style:{marginTop:"20px"}}),Object(a.jsx)(E,{lobbyExists:e.lobbyExists,serverWait:c,autoReset:u,setServerWait:n,lobby:e.lobby}),x&&Object(a.jsx)(f.a,{variant:"dark",disabled:!e.lobbyExists,onClick:function(){return e.lobbyExists&&function(){if(e.lobby.server.players){var t={};Object.values(e.lobby.server.players).forEach((function(s){t["lobbies/_".concat(e.lobby.local.lobbyCode,"/players/").concat(s.id,"/pressed")]=!1})),l.ref().update(t)}}()},children:"Reset buzzers"})]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h2",{style:{marginTop:"55px"},children:"Waiting for players."}),Object(a.jsx)(g.a,{className:"mb-5",animation:"border",variant:"primary"})]}),!e.lobby.server.players&&Object(a.jsx)(h,{url:v}),Object(a.jsx)(p.a,{in:!e.lobbyExists,children:Object(a.jsx)(d.a,{className:"d-flex justify-content-center",children:Object(a.jsx)(m.a,{className:"mt-3",variant:"danger",children:x?"The lobby has expired.":"The host has left the lobby."})})})]})})]})};s(61),s(62);var z=function(){var e=Object(r.useState)(""),t=Object(o.a)(e,2),s=t[0],c=t[1],n=Object(r.useState)(!0),i=Object(o.a)(n,2),l=i[0],b=i[1];return s?Object(a.jsx)(I,{lobbyExists:l,lobby:s}):Object(a.jsx)(x,{setLobbyExists:b,setLobby:c})};n.a.render(Object(a.jsx)(z,{}),document.getElementById("root"))}},[[63,1,2]]]);
//# sourceMappingURL=main.5df25859.chunk.js.map